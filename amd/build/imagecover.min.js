define(["jquery","filter_ally/util"],function(a,b){return new function(){var c=function(){a(".ally-image-wrapper").each(function(){var c=this,d=a(c).find("img"),e=a(c).find(".ally-image-cover"),f=a(c).find(".ally-actions"),g=parseInt(a(d).css("marginTop")),h=parseInt(a(d).css("marginLeft"));b.onCoordsChange(d,function(b){var i=b.right-b.left,j=b.bottom-b.top;a(e).css("width",i+"px").css("height",j+"px");var k=a(d).position().top+g,l=a(d).position().left+h;if(a(e).css("top",k+"px").css("left",l+"px"),f.length){var m=a(c).find(".ally-actions .ally-feedback").height();a(c).find(".ally-actions").css("top",k+j-m+"px").css("left",l+"px")}})})};this.init=function(){a(document).ready(c)}}});